(function(e){function t(t){for(var a,o,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(m.length)m.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==s[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={app:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"09e0":function(e,t,r){},"2b56":function(e,t,r){"use strict";r("09e0")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=(r("50c9"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-primary"},[r("router-link",{staticClass:"navbar-brand",attrs:{to:{name:"Home"}}},[e._v("Home")])],1),r("router-view",{staticClass:"container pt-2"})],1)}),n=[],o=r("2877"),i={},l=Object(o["a"])(i,s,n,!1,null,null,null),u=l.exports,c=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("div",{staticClass:"jumbotron text-center"},[r("h1",{staticClass:"display-3"},[e._v("Notes Website")]),r("p",{staticClass:"lead"},[e._v("Taking notes is helpful, so I made this website")]),r("hr",{staticClass:"my-4"}),r("p",{staticClass:"lead"},[r("router-link",{staticClass:"btn btn-primary btn-lg mr-3",attrs:{to:{name:"signup"},role:"button"}},[e._v("Sign up")]),r("router-link",{staticClass:"btn btn-primary btn-lg",attrs:{to:{name:"login"},role:"button"}},[e._v("Login")])],1)])])},m=[],p={name:"Home"},g=p,f=Object(o["a"])(g,d,m,!1,null,null,null),v=f.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h1",[e._v("Signup")]),e.signingUp?a("div",[a("img",{attrs:{src:r("d2bf")}})]):e._e(),e.errorMessage?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e(),e.signingUp?e._e():a("form",{on:{submit:function(t){return t.preventDefault(),e.signup()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[e._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",required:"",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),a("p",{staticClass:"form-text text-muted",attrs:{id:"usernameHelp"}},[e._v("Username must be longer than 2 characters, shorter than 30. Username can only contain alphanumeric characters.")])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"password"}},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",required:"",id:"password","aria-describedby":"passwordHelp",placeholder:"Password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("p",{staticClass:"form-text text-muted"},[e._v("Password must be 8 or more characters long.")])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"confirmPassword"}},[e._v("Confirm Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.confirmPassword,expression:"user.confirmPassword"}],staticClass:"form-control",attrs:{type:"password",required:"",id:"confirmPassword","aria-describedby":"confirmPasswordHelp",placeholder:"Confirm Password"},domProps:{value:e.user.confirmPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"confirmPassword",t.target.value)}}}),a("p",{staticClass:"form-text text-muted"},[e._v("Please confirm your password.")])])]),a("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"submit"}},[e._v("Submit")]),a("router-link",{staticClass:"ml-3 btn btn-primary btn-lg",attrs:{to:{name:"login"}}},[e._v("Login")])],1)])},b=[],w=(r("caad"),r("d3b7"),r("2532"),r("498a"),r("ddb0"),r("bc3a")),_=r.n(w),y="/auth/signup",C=r("d370"),x=C.object().keys({username:C.string().regex(/(^[a-zA-Z0-9_]*$)/).min(2).max(30).required(),password:C.string().trim().regex(/(^[a-zA-Z0-9!@#$%^&*()_+]*$)/).min(8).required(),confirmPassword:C.string().trim().regex(/(^[a-zA-Z0-9!@#$%^&*()_+]*$)/).min(8).required()}),P={data:function(){return{signingUp:!1,errorMessage:"",user:{username:"",password:"",confirmPassword:""}}},watch:{user:{handler:function(){this.errorMessage=""},deep:!0}},methods:{signup:function(){var e=this;if(this.errorMessage="",this.validUser()){var t={username:this.user.username,email:this.user.email,password:this.user.password};_.a.post(y,t,{headers:{"content-type":"application/json"}}).then((function(e){if("OK"===e.statusText)return e.data;throw new Error(e.data.error)})).then((function(t){localStorage.token=t.token,e.signingUp=!0,setTimeout((function(){e.signingUp=!1,e.$router.push("/dashboard")}),1e3)})).catch((function(t){t.message.includes("Request failed with status code 409")&&(e.errorMessage="Duplicate username")}))}},validUser:function(){if(this.user.password!==this.user.confirmPassword)return this.errorMessage="Passwords must match",!1;var e=x.validate(this.user);return void 0===e.error||(e.error.message.includes("username")?this.errorMessage="Username is invalid":e.error.message.includes("password")?this.errorMessage="Password is invalid":this.errorMessage="Email is invalid",!1)}}},S=P,k=Object(o["a"])(S,h,b,!1,null,null,null),N=k.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h1",[e._v("Login")]),e.loggingIn?a("div",[a("img",{attrs:{src:r("d2bf")}})]):e._e(),e.errorMessage?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e(),e.loggingIn?e._e():a("form",{on:{submit:function(t){return t.preventDefault(),e.login()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[e._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username","aria-describedby":"UsernameHelp",placeholder:"Enter username"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),a("label",{attrs:{for:"password"}},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password","aria-describedby":"PasswordHelp",placeholder:"Enter Password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-lg"},[e._v("Submit")]),a("router-link",{staticClass:"m-3 btn btn-primary btn-lg",attrs:{to:{name:"signup"}}},[e._v("Signup")])],1)])},$=[],U="/auth/login",j=r("d370"),I=j.object().keys({username:j.string().regex(/(^[a-zA-Z0-9_]*$)/).min(2).max(30).required(),password:j.string().trim().regex(/(^[a-zA-Z0-9!@#$%^&*()_+]*$)/).min(8).required()}),O={data:function(){return{loggingIn:!1,errorMessage:"",user:{username:"",password:""}}},watch:{user:{handler:function(){this.errorMessage=""},deep:!0}},methods:{login:function(){var e=this;if(this.errorMessage="",this.validUser()){var t={username:this.user.username,password:this.user.password};_.a.post(U,t,{headers:{"content-type":"application/json"}}).then((function(t){var r=t.data.token;localStorage.token=r,e.loggingIn=!0,setTimeout((function(){e.$router.push("/dashboard")}),1e3)})).catch((function(t){var r=t.response.data.error;e.errorMessage=r}))}},validUser:function(){var e=I.validate(this.user);if(void 0===e.error)return!0;e.error.message.includes("username")?this.errorMessage="Username is invalid":this.errorMessage="Password is invalid"}}},A=O,E=Object(o["a"])(A,M,$,!1,null,null,null),H=E.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("h1",[e._v("Dashboard")]),e.user?e._e():r("h1",[e._v("Getting User...")]),e.user?r("h1",[e._v("Hello, "+e._s(e.user.username)+"!!")]):e._e(),e.message?r("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" "+e._s(e.message)+" ")]):e._e(),r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.logout()}}},[e._v("Logout")]),r("button",{staticClass:"btn btn-primary ml-2",on:{click:function(t){return e.deleteAccount()}}},[e._v("Delete Account")]),r("button",{staticClass:"btn ml-2 btn-info",on:{click:function(t){e.showForm=!e.showForm}}},[e._v("Toggle Form")]),e.showForm?r("form",{on:{submit:function(t){return t.preventDefault(),e.addNote()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[e._v("Title")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newNote.title,expression:"newNote.title"}],staticClass:"form-control",attrs:{required:"",type:"text",id:"title","aria-describedby":"titleHelp",placeholder:"Enter a title"},domProps:{value:e.newNote.title},on:{input:function(t){t.target.composing||e.$set(e.newNote,"title",t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"titleHelp"}},[e._v("Enter a descriptive title for your note.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"note"}},[e._v("Note")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newNote.note,expression:"newNote.note"}],staticClass:"form-control",attrs:{id:"note",required:"",placeholder:"Enter your note",rows:"3"},domProps:{value:e.newNote.note},on:{input:function(t){t.target.composing||e.$set(e.newNote,"note",t.target.value)}}})]),r("button",{staticClass:"btn btn-primary"},[e._v("Add Note")])]):e._e(),r("section",{staticClass:"row mt-3"},e._l(e.notes,(function(t){return r("div",{key:t._id,staticClass:"col-4"},[r("div",{staticClass:"card border-info mb-3"},[r("div",{staticClass:"card-header"},[e._v(e._s(t.title)),r("span",{on:{click:function(r){return e.removeItem(t._id)}}},[e._v("×")])]),r("div",{staticClass:"card-body"},[r("p",{staticClass:"card-text",domProps:{innerHTML:e._s(e.renderMarkdown(t.note))}})])])])})),0)])},T=[],q=(r("c740"),r("a434"),r("d4cd")),D=r.n(q),B=r("362d"),F=r.n(B),L=new D.a;L.use(F.a);var Z="/",J={data:function(){return{message:"",showForm:!1,user:null,newNote:{title:"",note:""},notes:[]}},mounted:function(){var e=this;_.a.get("".concat(Z,"checkUser"),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.data})).then((function(t){if(t.user){if(e.user=t.user,e.getNotes(),localStorage.note){var r=JSON.parse(localStorage.note);e.newNote.title=r.title,e.newNote.note=r.note,localStorage.removeItem("note"),e.addNote()}localStorage.noteId&&e.removeItem(localStorage.noteId),localStorage.deleteUser&&e.deleteAccount()}else e.logout()}))},methods:{deleteAccount:function(){var e=this,t=confirm("Are you sure that you want delete your account?");t&&(localStorage.deleteUser=!0,_.a.delete("".concat(Z,"auth/deleteAccount"),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.data})).then((function(t){localStorage.removeItem("deleteUser"),localStorage.removeItem("token"),e.$router.push("/signup")})).catch((function(){e.logout()})))},renderMarkdown:function(e){return L.render(e)},getNotes:function(){var e=this;_.a.get("".concat(Z,"api/notes"),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.data})).then((function(t){e.notes=t}))},logout:function(){localStorage.removeItem("token"),this.$router.push("/login")},addNote:function(){var e=this;localStorage.note=JSON.stringify(this.newNote),_.a.post("".concat(Z,"api/notes"),this.newNote,{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.data})).then((function(t){localStorage.removeItem("note"),e.newNote={title:"",note:""},e.notes.push(t),e.message="Added!",setTimeout((function(){e.message=""}),1e3)})).catch((function(t){var r=t.response.data.error;"Unauthorized"===r&&e.logout()}))},removeItem:function(e){var t=this;localStorage.noteId=e;var r=this.notes.findIndex((function(t){return t._id===e}));_.a.delete("".concat(Z,"api/notes"),{data:{id:e},headers:{"content-type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.data})).then((function(e){localStorage.removeItem("noteId"),t.notes.splice(r,1),t.message="Deleted!",setTimeout((function(){t.message=""}),1e3)})).catch((function(e){var r=e.response.data.error;"Unauthorized"===r&&t.logout()}))}}},G=J,K=(r("2b56"),Object(o["a"])(G,z,T,!1,null,null,null)),R=K.exports;function W(e,t,r){localStorage.token?r("/dashboard"):r()}a["a"].use(c["a"]);var Q=[{path:"/",name:"Home",component:v},{path:"/signup",name:"signup",component:N,beforeEnter:W},{path:"/login",name:"login",component:H,beforeEnter:W},{path:"/dashboard",name:"dashboard",component:R,beforeEnter:function(e,t,r){localStorage.token?r():r("/login")}}],V=new c["a"]({routes:Q}),X=V;a["a"].config.productionTip=!1,new a["a"]({router:X,render:function(e){return e(u)}}).$mount("#app")},d2bf:function(e,t,r){e.exports=r.p+"img/pacman.ff387692.svg"}});
//# sourceMappingURL=app.85bd0952.js.map